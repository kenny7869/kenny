(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{393:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"aws-httpd-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aws-httpd-tomcat"}},[t._v("#")]),t._v(" AWS/HTTPD/TOMCAT")]),t._v(" "),s("p",[t._v("Apache HTTP Server + Tomcat Server On AWS")]),t._v(" "),s("ul",[s("li",[t._v("Apache httpd 2.4.37 : "),s("a",{attrs:{href:"https://httpd.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache HTTP Server"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Tomcat 8.5.57 : "),s("a",{attrs:{href:"https://tomcat.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache Tomcat"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"http-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-server"}},[t._v("#")]),t._v(" HTTP Server")]),t._v(" "),s("h3",{attrs:{id:"移除舊版本-如果有的話"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除舊版本-如果有的話"}},[t._v("#")]),t._v(" 移除舊版本，如果有的話")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#列出所有已安裝的相關程式")]),t._v("\nyum list installed *httpd*\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# httpd.x86_64")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# httpd-manual.noarch")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# httpd-tools.x86_64")]),t._v("\n\nyum list installed *mod_*\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mod_perl.x86_64")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mod_ssl.x86_64")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mod_wsgi.x86_64")]),t._v("\n\nyum remove httpd.x86_64 httpd-manual.noarch httpd-tools.x86_64 mod_perl.x86_64 mod_ssl.x86_64 mod_wsgi.x86_64\n")])])]),s("h3",{attrs:{id:"install-start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-start"}},[t._v("#")]),t._v(" install & start")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" httpd mod_ssl\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" httpd start\n")])])]),s("h3",{attrs:{id:"編輯-httpd-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#編輯-httpd-conf"}},[t._v("#")]),t._v(" 編輯 httpd.conf")]),t._v(" "),s("p",[t._v("設定變量")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTPD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/etc/httpd/conf/'")]),t._v("\n")])])]),s("p",[t._v("將option 設定為 none")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/Options Indexes FollowSymLinks/Options None/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${HTTPD}")]),t._v("httpd.conf\n")])])]),s("p",[t._v("自動轉導加密連線")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${HTTPD}")]),t._v("httpd.conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EOF"\n\nRewriteEngine On\nRewriteCond %{HTTPS} off\nRewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}\nEOF')]),t._v("\n")])])]),s("p",[t._v("取消變量")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v(" HTTPD\n")])])]),s("h3",{attrs:{id:"編輯ssl-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#編輯ssl-conf"}},[t._v("#")]),t._v(" 編輯ssl.conf")]),t._v(" "),s("p",[t._v("設定變量")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SSL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/etc/httpd/conf.d/'")]),t._v("\n")])])]),s("p",[t._v("憑證設定")]),t._v(" "),s("ul",[s("li",[t._v("refer: "),s("RouterLink",{attrs:{to:"/server/ssl/#憑證請求檔製作"}},[t._v("#憑證請求檔製作")])],1)]),t._v(" "),s("p",[t._v("SSL 資安設定")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\nSSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1/\nSSLProxyProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1\nSSLCipherSuite ALL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("aNULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ADH:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("eNULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("LOW:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("EXP:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("NULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC4:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC2:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("DES:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("3DES:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA256:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA384:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("MD5+HIGH:+MEDIUM\nSSLProxyCipherSuite ALL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("aNULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ADH:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("eNULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("LOW:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("EXP:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("NULL:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC4:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("RC2:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("DES:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("3DES:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA256:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("SHA384:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("MD5+HIGH:+MEDIUM\n")])])]),s("p",[t._v("或是")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/SSLProtocol/s/.*/SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/SSLProxyProtocol/s/.*/SSLProxyProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/^SSLCipherSuite/s/.*/SSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:!NULL:!RC4:!RC2:!DES:!3DES:!SHA:!SHA256:!SHA384:!MD5+HIGH:+MEDIUM/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/^SSLProxyCipherSuite/s/.*/SSLProxyCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:!NULL:!RC4:!RC2:!DES:!3DES:!SHA:!SHA256:!SHA384:!MD5+HIGH:+MEDIUM/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n")])])]),s("p",[t._v("ProxyPass to Tomcat")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/VirtualHost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nProxyPass / ajp://localhost:8009/\nProxyPassReverse / ajp://localhost:8009/\n")])])]),s("p",[t._v("或是")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/<\\/VirtualHost>/s/^/ProxyPass \\/ ajp:\\/\\/localhost:8009\\/"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("ProxyPassReverse \\/ ajp:\\/\\/localhost:8009\\/"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${SSL}")]),t._v("ssl.conf\n")])])]),s("p",[t._v("取消變量")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v(" SSL\n")])])]),s("h3",{attrs:{id:"selinux-關閉"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selinux-關閉"}},[t._v("#")]),t._v(" selinux 關閉")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("setsebool -P httpd_can_network_connect "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("h3",{attrs:{id:"restart-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restart-tomcat"}},[t._v("#")]),t._v(" restart tomcat")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("/usr/sbin/httpd -t "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" httpd restart  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# apachectl configtest")]),t._v("\n")])])]),s("h2",{attrs:{id:"tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat"}},[t._v("#")]),t._v(" Tomcat")]),t._v(" "),s("h3",{attrs:{id:"install-jre"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-jre"}},[t._v("#")]),t._v(" Install JRE")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" java-1.8.0-openjdk.x86_64\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#確認 JAVA 版本")]),t._v("\njava -version\n")])])]),s("p",[t._v("如果系統中有多個 java 版本，可下指令切換預設使用的版本：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("update-alternatives --config java\n")])])]),s("h3",{attrs:{id:"install-start-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-start-tomcat"}},[t._v("#")]),t._v(" Install & start Tomcat")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" tomcat8\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 start\n")])])]),s("p",[t._v("aws 安裝包在安裝的同時便已經將 tomcat 群組權限加入，故不用執行以下設定")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxf /opt/apache-tomcat-8.5.57.tar.gz -C /opt\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /opt/apache-tomcat-8.5.57 /opt/tomcat\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" -r tomcat -s /sbin/nologin -d /opt/tomcat\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -Rh tomcat:tomcat /opt/tomcat /opt/apache-tomcat-8.5.57\n")])])]),s("h3",{attrs:{id:"編輯-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#編輯-config"}},[t._v("#")]),t._v(" 編輯 Config")]),t._v(" "),s("p",[t._v("aws 安裝包在安裝的同時便已經將 startup script 設定，故也不需執行以下設定")]),t._v(" "),s("p",[s("code",[t._v("/etc/systemd/system/tomcat.service")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/systemd/system/tomcat.service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EOF"\n[Unit]\nDescription=Tomcat\nAfter=syslog.target network.target\n\n[Service]\nType=forking\n\nUser=tomcat\nGroup=tomcat\n\nEnvironment="CATALINA_BASE=/opt/tomcat"\nEnvironment="CATALINA_HOME=/opt/tomcat"\nEnvironment="CATALINA_PID=/opt/tomcat/tomcat.pid"\n\nExecStart=/opt/tomcat/bin/startup.sh\nExecStop=/opt/tomcat/bin/shutdown.sh\n\n[Install]\nWantedBy=multi-user.target\nEOF')]),t._v("\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("systemctl daemon-reload\nsystemctl start tomcat.service\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" tomcat.service\n")])])]),s("p",[t._v("編輯 server.xml")]),t._v(" "),s("p",[s("code",[t._v("/etc/tomcat8/server.xml")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("#將以下段落註解掉\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- \n<Connector port="8080" protocol="HTTP/1.1"\n            connectionTimeout="20000"\n            redirectPort="8443" />\n--\x3e')]),t._v("\n\n#於以下段落進行修改\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Define an AJP 1.3 Connector on port 8009 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Connector")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("8009"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("protocol")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("AJP/1.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("secretRequired")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n#將以下段落註解掉\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- \n<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n        prefix="localhost_access_log." suffix=".txt"\n        pattern="%h %l %u %t &quot;%r&quot; %s %b" />\n--\x3e')]),t._v("\n")])])]),s("p",[t._v("編輯 logging.properties")]),t._v(" "),s("p",[s("code",[t._v("/etc/tomcat8/logging.properties")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("#將以下段落註解並改寫\n#handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler\nhandlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler\n\n#"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler\n\n#將以下段落註解並改寫\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FINE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logs\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prefix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FINE")]),t._v("\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logs\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prefix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FINE")]),t._v("\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logs\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prefix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FINE")]),t._v("\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logs\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prefix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n#java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FINE")]),t._v("\n#java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsoleHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("formatter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OneLineFormatter\n\n#將以下段落註解掉\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INFO")]),t._v("\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler\n\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INFO")]),t._v("\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler\n\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("level "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INFO")]),t._v("\n#org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContainerBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Catalina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("juli"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncFileHandler\n")])])]),s("p",[t._v("編輯 web.xml")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("#以下段落註解並改寫\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--\n    <welcome-file-list>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n  --\x3e")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("403"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/error.html"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("404"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/error.html"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("500"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/error.html"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exception-type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("java.lang.Exception"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exception-type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/error.html"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("error-page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("web-app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("Tomcat8 restart")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 restart\n")])])]),s("p",[t._v("check tomcat service")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -k https://localhost\n")])])]),s("h2",{attrs:{id:"production-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#production-env"}},[t._v("#")]),t._v(" Production Env")]),t._v(" "),s("h3",{attrs:{id:"front"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#front"}},[t._v("#")]),t._v(" front")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/nextec/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("temp,configs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/common.properties.restapi /opt/nextec/configs/common.properties\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R tomcat:tomcat /opt/nextec\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 restart\n")])])]),s("p",[s("code",[t._v("/etc/httpd/conf.d/ssl.conf")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("RewriteEngine On\n\nRewriteCond %{REQUEST_URI} ^/(cht|nftu|honghwa|chtr)$ [NC]\nRewriteRule ^/(.*) https://%{HTTP_HOST}/login?corp=$1 [L]\n\nRewriteCond %{HTTP_HOST} ^www.i4u.com.tw$ [NC]\nRewriteRule ^/(.*)$ https://www.iforu.com.tw/?$corp=cht [L]\n")])])]),s("h3",{attrs:{id:"restapi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restapi"}},[t._v("#")]),t._v(" restapi")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/nextec/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("temp,configs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/common.properties.restapi /opt/nextec/configs/common.properties\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R tomcat:tomcat /opt/nextec\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 restart\n")])])]),s("p",[s("code",[t._v("/etc/httpd/conf.d/ssl.conf")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("RewriteEngine On\n\nRewriteCond %{REQUEST_URI} ^/(cht|nftu|honghwa|chtr)$ [NC]\nRewriteRule ^/(.*) https://%{HTTP_HOST}/login?corp=$1 [L]\n\nRewriteCond %{HTTP_HOST} ^www.i4u.com.tw$ [NC]\nRewriteRule ^/(.*)$ https://www.iforu.com.tw/?$corp=cht [L]\n")])])]),s("h3",{attrs:{id:"admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin"}},[t._v("#")]),t._v(" admin")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/nextec/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("report_temp,temp,pdf,excel_config,configs/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("bank,classpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/common.properties.admin /opt/nextec/configs/common.properties\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/bank/ /opt/nextec/configs/bank/ --recursive\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/classpath/ /opt/nextec/configs/classpath/ --recursive\naws s3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" s3://mgmt.iforu.com.tw/configs/pdf/ /opt/nextec/pdf/ --recursive\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R tomcat:tomcat /opt/nextec\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 restart\n")])])]),s("p",[t._v("更改 classpath")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/tomcat8/tomcat8.conf\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CLASSPATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/nextec/configs/classpath/:/var/lib/tomcat8/webapps/ROOT/WEB-INF/lib/FISCToolkit.jar\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" tomcat8 restart\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);