<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>表格 (Table) | Kenny&#39;s Lab</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Lab memo">
    
    <link rel="preload" href="/kenny/assets/css/0.styles.94118319.css" as="style"><link rel="preload" href="/kenny/assets/js/app.fe21e292.js" as="script"><link rel="preload" href="/kenny/assets/js/2.5ff098fa.js" as="script"><link rel="preload" href="/kenny/assets/js/9.bd98d9c1.js" as="script"><link rel="prefetch" href="/kenny/assets/js/10.416c03c8.js"><link rel="prefetch" href="/kenny/assets/js/11.d04c0da2.js"><link rel="prefetch" href="/kenny/assets/js/12.f31ad1c2.js"><link rel="prefetch" href="/kenny/assets/js/13.2b0624ce.js"><link rel="prefetch" href="/kenny/assets/js/14.cda66c16.js"><link rel="prefetch" href="/kenny/assets/js/15.4d9e5ccf.js"><link rel="prefetch" href="/kenny/assets/js/16.7432d660.js"><link rel="prefetch" href="/kenny/assets/js/17.bc258316.js"><link rel="prefetch" href="/kenny/assets/js/18.87f3762e.js"><link rel="prefetch" href="/kenny/assets/js/19.99498e3e.js"><link rel="prefetch" href="/kenny/assets/js/20.245cef77.js"><link rel="prefetch" href="/kenny/assets/js/21.f538afd2.js"><link rel="prefetch" href="/kenny/assets/js/22.fc6d7552.js"><link rel="prefetch" href="/kenny/assets/js/23.2e3912e6.js"><link rel="prefetch" href="/kenny/assets/js/24.579b6ae2.js"><link rel="prefetch" href="/kenny/assets/js/25.d8736b04.js"><link rel="prefetch" href="/kenny/assets/js/26.5e04483f.js"><link rel="prefetch" href="/kenny/assets/js/27.b7961f61.js"><link rel="prefetch" href="/kenny/assets/js/28.0633e489.js"><link rel="prefetch" href="/kenny/assets/js/29.5ac91e30.js"><link rel="prefetch" href="/kenny/assets/js/3.7a203730.js"><link rel="prefetch" href="/kenny/assets/js/30.583097c9.js"><link rel="prefetch" href="/kenny/assets/js/31.b8ad809e.js"><link rel="prefetch" href="/kenny/assets/js/32.9cda645e.js"><link rel="prefetch" href="/kenny/assets/js/33.f870b94a.js"><link rel="prefetch" href="/kenny/assets/js/34.91c6012c.js"><link rel="prefetch" href="/kenny/assets/js/35.ce3dd640.js"><link rel="prefetch" href="/kenny/assets/js/36.3348b13c.js"><link rel="prefetch" href="/kenny/assets/js/37.7abbcd0e.js"><link rel="prefetch" href="/kenny/assets/js/38.3205a2e2.js"><link rel="prefetch" href="/kenny/assets/js/39.92af8e94.js"><link rel="prefetch" href="/kenny/assets/js/4.be3171d2.js"><link rel="prefetch" href="/kenny/assets/js/40.550e7643.js"><link rel="prefetch" href="/kenny/assets/js/41.4c06de26.js"><link rel="prefetch" href="/kenny/assets/js/42.67048d30.js"><link rel="prefetch" href="/kenny/assets/js/43.674d7bcf.js"><link rel="prefetch" href="/kenny/assets/js/44.5b6cf7e4.js"><link rel="prefetch" href="/kenny/assets/js/45.af6659aa.js"><link rel="prefetch" href="/kenny/assets/js/46.17a5e092.js"><link rel="prefetch" href="/kenny/assets/js/47.9b5b2305.js"><link rel="prefetch" href="/kenny/assets/js/48.f4f637ad.js"><link rel="prefetch" href="/kenny/assets/js/49.36cafa62.js"><link rel="prefetch" href="/kenny/assets/js/5.3fe71bc1.js"><link rel="prefetch" href="/kenny/assets/js/50.318ba7e7.js"><link rel="prefetch" href="/kenny/assets/js/51.1d526328.js"><link rel="prefetch" href="/kenny/assets/js/52.57f4888f.js"><link rel="prefetch" href="/kenny/assets/js/53.cbbecfef.js"><link rel="prefetch" href="/kenny/assets/js/54.c686dcca.js"><link rel="prefetch" href="/kenny/assets/js/6.db88a243.js"><link rel="prefetch" href="/kenny/assets/js/7.b24160ef.js"><link rel="prefetch" href="/kenny/assets/js/8.6a2486e8.js">
    <link rel="stylesheet" href="/kenny/assets/css/0.styles.94118319.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kenny/" class="home-link router-link-active"><!----> <span class="site-name">Kenny's Lab</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kenny/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux Basic" class="dropdown-title"><span class="title">Linux Basic</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux Basic" class="mobile-dropdown-title"><span class="title">Linux Basic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/Linux/system directory.html" class="nav-link">
  系統目錄結構與管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/file basic.html" class="nav-link">
  文件基本屬性
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/account.html" class="nav-link">
  用戶和群組管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/disk.html" class="nav-link">
  磁碟管理
</a></li></ul></div></div><div class="nav-item"><a href="/kenny/linuxserver/NetworkManager/" class="nav-link">
  Linux Server
</a></div><div class="nav-item"><a href="/kenny/aws server/" class="nav-link">
  AWS Server
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AWS Certification" class="dropdown-title"><span class="title">AWS Certification</span> <span class="arrow down"></span></button> <button type="button" aria-label="AWS Certification" class="mobile-dropdown-title"><span class="title">AWS Certification</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/aws certification/ACP-1/" class="nav-link">
  AWS Cloud Practitioner-1
</a></li><li class="dropdown-item"><!----> <a href="/kenny/aws certification/SAA/" class="nav-link">
  AWS Solutions Architect Associate
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="PostgreSQL" class="dropdown-title"><span class="title">PostgreSQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="PostgreSQL" class="mobile-dropdown-title"><span class="title">PostgreSQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/pgsql/syntax/" class="nav-link">
  SQL語法
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Database/" class="nav-link">
  資料庫
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Table.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  表格
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Transaction/" class="nav-link">
  交易管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Query.html" class="nav-link">
  資料查詢
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Authority.html" class="nav-link">
  資料庫角色、使用者權限管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/JAVA/helloworld.html" class="nav-link">
  HelloWorld
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/variable/" class="nav-link">
  變數、資料型態、運算子
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/string/" class="nav-link">
  字串與陣列
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/controlflow.html" class="nav-link">
  控制流程語法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring 5" class="dropdown-title"><span class="title">Spring 5</span> <span class="arrow down"></span></button> <button type="button" aria-label="Spring 5" class="mobile-dropdown-title"><span class="title">Spring 5</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/Spring/Spring Core.html" class="nav-link">
  Spring Core
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kenny/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux Basic" class="dropdown-title"><span class="title">Linux Basic</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux Basic" class="mobile-dropdown-title"><span class="title">Linux Basic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/Linux/system directory.html" class="nav-link">
  系統目錄結構與管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/file basic.html" class="nav-link">
  文件基本屬性
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/account.html" class="nav-link">
  用戶和群組管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/Linux/disk.html" class="nav-link">
  磁碟管理
</a></li></ul></div></div><div class="nav-item"><a href="/kenny/linuxserver/NetworkManager/" class="nav-link">
  Linux Server
</a></div><div class="nav-item"><a href="/kenny/aws server/" class="nav-link">
  AWS Server
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AWS Certification" class="dropdown-title"><span class="title">AWS Certification</span> <span class="arrow down"></span></button> <button type="button" aria-label="AWS Certification" class="mobile-dropdown-title"><span class="title">AWS Certification</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/aws certification/ACP-1/" class="nav-link">
  AWS Cloud Practitioner-1
</a></li><li class="dropdown-item"><!----> <a href="/kenny/aws certification/SAA/" class="nav-link">
  AWS Solutions Architect Associate
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="PostgreSQL" class="dropdown-title"><span class="title">PostgreSQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="PostgreSQL" class="mobile-dropdown-title"><span class="title">PostgreSQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/pgsql/syntax/" class="nav-link">
  SQL語法
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Database/" class="nav-link">
  資料庫
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Table.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  表格
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Transaction/" class="nav-link">
  交易管理
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Query.html" class="nav-link">
  資料查詢
</a></li><li class="dropdown-item"><!----> <a href="/kenny/pgsql/Authority.html" class="nav-link">
  資料庫角色、使用者權限管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/JAVA/helloworld.html" class="nav-link">
  HelloWorld
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/variable/" class="nav-link">
  變數、資料型態、運算子
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/string/" class="nav-link">
  字串與陣列
</a></li><li class="dropdown-item"><!----> <a href="/kenny/JAVA/controlflow.html" class="nav-link">
  控制流程語法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring 5" class="dropdown-title"><span class="title">Spring 5</span> <span class="arrow down"></span></button> <button type="button" aria-label="Spring 5" class="mobile-dropdown-title"><span class="title">Spring 5</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kenny/Spring/Spring Core.html" class="nav-link">
  Spring Core
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/kenny/pgsql/Database.html" class="sidebar-link">資料庫 (Database, DB)</a></li><li><a href="/kenny/pgsql/syntax.html" class="sidebar-link">SQL 語法</a></li><li><a href="/kenny/pgsql/Table.html" aria-current="page" class="active sidebar-link">表格 (Table)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#資料類型" class="sidebar-link">資料類型</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#限制-constraints" class="sidebar-link">限制 (constraints)</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#建立表格" class="sidebar-link">建立表格</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#更改表格" class="sidebar-link">更改表格</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#刪除表格" class="sidebar-link">刪除表格</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#編號" class="sidebar-link">編號</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#修改資料" class="sidebar-link">修改資料</a></li><li class="sidebar-sub-header"><a href="/kenny/pgsql/Table.html#刪除資料" class="sidebar-link">刪除資料</a></li></ul></li><li><a href="/kenny/pgsql/Transaction.html" class="sidebar-link">交易管理 (Transaction Management)</a></li><li><a href="/kenny/pgsql/Query.html" class="sidebar-link">資料查詢</a></li><li><a href="/kenny/pgsql/Authority.html" class="sidebar-link">資料庫角色、使用者權限管理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="表格-table"><a href="#表格-table" class="header-anchor">#</a> 表格 (Table)</h1> <p>以欄 (columns) 與列 (rows) 方式來儲存資料</p> <ul><li>主鍵 (Primary Key, PK)：主鍵欄位內的值是<strong>唯⼀不可重複</strong>的，主鍵欄位最好是個<strong>重要的辨識欄位</strong>，所以會設定為 NOT NULL (不可為空值)</li> <li>外來鍵 (Foreign Key, FK)：外來鍵欄位是為了關聯而存在的，外來鍵欄位必須參照到另一個表格的主鍵欄位，以避免多頭馬車，主鍵欄位必須有值，外來鍵⽅可關聯</li> <li>超鍵 (Super Key)：指在一個資料表中，選出兩個或兩個以上的欄位組合起來，以作為唯<br>
一識別資料的欄位，因此，我們可以稱這種組合出來的欄位，就是超鍵</li> <li>候選鍵 (Candidate Key)：候選鍵就是主鍵的候選人，並且也是關聯表的屬性子集所組<br>
成</li> <li>次要鍵 (Alternate Key)：沒被選為主鍵的其他候選鍵</li></ul> <p>在設計表格的時候，會擁有多個欄位，會先挑選符合唯一性的欄位以及符合最⼩性的欄位作為候選鍵，然後再挑選出主鍵</p> <h2 id="資料類型"><a href="#資料類型" class="header-anchor">#</a> 資料類型</h2> <ul><li>整數</li></ul> <p><code>smallint</code>：2 bytes，小範圍整數<br> <code>integer</code>：4 bytes，常用的整數<br> <code>bigint</code>：8 bytes，大範圍整數<br> <code>numeric</code> 以及 <code>decimal</code>：使用者自行指定範圍， <code>scale</code> 標⽰⼩數位數， <code>precision</code> 標示有效位數 (1~1000)</p> <ul><li>文字</li></ul> <p><code>CHAR(n)</code>：固定長度，空⽩字元填充。n 標⽰字元數而非 bytes<br> <code>character varying(n)</code>：動態長度，⽤在不確定字數但有限度的字數上<br> <code>TEXT</code>：需要儲存極⼤量文字時使⽤ (不確定字數且無限度的字數)</p> <ul><li>日期、時間：</li></ul> <p><code>DATE</code>：只有日期 (4713 BC ~ 5874897 AD)<br> <code>TIMESTAMP</code>：包含⽇期與時間 (4713 BC ~ 294276 AD)</p> <h2 id="限制-constraints"><a href="#限制-constraints" class="header-anchor">#</a> 限制 (constraints)</h2> <p>建立或修改表格時欄位皆可加上限制</p> <ul><li>欄位的限制可直接列在欄位後⾯，或是列在所有欄位後面</li> <li>限制可加上名稱，也可不加上名稱 (系統會自動加上)</li> <li>pgAdmin：指定表格右鍵 &gt; Properties &gt; Constraints</li></ul> <h2 id="建立表格"><a href="#建立表格" class="header-anchor">#</a> 建立表格</h2> <ul><li>使用 pgAdmin 圖形化建立表格，Schemas &gt; Tables右鍵 &gt; Create &gt; Table</li></ul> <ol><li>主鍵：</li></ol> <p><img src="/kenny/assets/img/psql-4.ce21df3e.png" alt="psql-4" title="psql-4"></p> <p><img src="/kenny/assets/img/psql-5.ab61e74b.png" alt="psql-5" title="psql-5"></p> <ol start="2"><li>外來鍵：</li></ol> <p><img src="/kenny/assets/img/psql-6.05b69ca2.png" alt="psql-6" title="psql-6"></p> <p><img src="/kenny/assets/img/psql-7.c7a008bb.png" alt="psql-7" title="psql-7"></p> <ul><li>使用 CREATE TABLE 來建立資料庫表格</li></ul> <ol><li><p>主鍵：</p> <p>語法：</p></li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">(</span>
column1 datatype <span class="token keyword">constraint</span><span class="token punctuation">,</span>
column2 datatype <span class="token keyword">constraint</span><span class="token punctuation">,</span>
column3 datatype <span class="token keyword">constraint</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- CREATE TABLE - PK (不想自訂PK constraint名稱，可以直接在欄位後面加PK設定)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> PUBLISHER <span class="token punctuation">(</span>
  PUBLISHER_ID <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  PUBLISHER_NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  CONTACT <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  PHONE <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  TIME_INSERT <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 要建立複合PK或自訂PK constraint名稱必須列在後面</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> PUBLISHER <span class="token punctuation">(</span>
  PUBLISHER_ID <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  PUBLISHER_NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  CONTACT <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  PHONE <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  TIME_INSERT <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> PK_PUBLISHER <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>外來鍵：</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 不想自訂FK constraint名稱，可以直接在欄位後面加REFERENCES設定</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> BOOK <span class="token punctuation">(</span>
  ISBN <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  BOOK_NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  PRICE <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>PRICE <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  AUTHOR <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  PUBLICATION_DATE <span class="token keyword">DATE</span><span class="token punctuation">,</span>
  PUBLISHER_ID <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> PUBLISHER <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- CREATE TABLE - FK (要自訂FK constraint名稱必須列在後面)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> BOOK <span class="token punctuation">(</span>
  ISBN <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  BOOK_NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  PRICE <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>PRICE <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  AUTHOR <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  PUBLICATION_DATE <span class="token keyword">DATE</span><span class="token punctuation">,</span>
  PUBLISHER_ID <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> FK_BOOK_PUBLISHER
  <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> PUBLISHER <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>外來鍵建立失敗可能原因</strong>：</p> <ul><li>外來鍵與參照到的主鍵，資料類型不相同</li> <li>欲參照 (關聯) 到的欄位不是 PK (或不具有唯一性)</li> <li>FK Constraint 的名稱重複</li> <li>外來鍵欄位設定了預設值</li></ul> <p>可以使用 <code>\d</code> 指令來檢視表格是否建立成功， <code>\d tablename</code> 檢視表格訊息</p> <h2 id="更改表格"><a href="#更改表格" class="header-anchor">#</a> 更改表格</h2> <ul><li>新增欄位</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token keyword">LANGUAGE</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>欄位更名</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> <span class="token keyword">LANGUAGE</span> <span class="token keyword">TO</span> LANGUAGES<span class="token punctuation">;</span>
</code></pre></div><ul><li>修改/刪除欄位預設值</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> LANGUAGES <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> <span class="token string">'Chinese'</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> LANGUAGES <span class="token keyword">DROP</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>修改欄位類型</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> LANGUAGES <span class="token keyword">TYPE</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>刪除欄位</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> LANGUAGES<span class="token punctuation">;</span>
</code></pre></div><ul><li>建立 FK</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_BOOK_PUBLISHER
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> PUBLISHER <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>移除 FK</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> FK_BOOK_PUBLISHER<span class="token punctuation">;</span>
</code></pre></div><ul><li>欄位改為不可/可為空值</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> AUTHOR <span class="token keyword">SET</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> BOOK <span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span> AUTHOR <span class="token keyword">DROP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="刪除表格"><a href="#刪除表格" class="header-anchor">#</a> 刪除表格</h2> <ul><li>pgAdmin，指定表格右鍵 &gt; Delete/Drop</li></ul> <p><img src="/kenny/assets/img/psql-8.52299fa8.png" alt="psql-8" title="psql-8"></p> <ul><li>DROP TABLE 語法</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> tablname<span class="token punctuation">;</span>
</code></pre></div><ul><li>pgAdmin，指定表格右鍵 &gt; View/Edit Data &gt; All Rows &gt; 新增完成後點擊 Save File 按鈕</li></ul> <p><img src="/kenny/assets/img/psql-9.a08f6b0e.png" alt="psql-9" title="psql-9"></p> <ul><li>INSERT INTO 用於向表中寫入新資料</li></ul> <p><strong>語法</strong>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TABLE_NAME <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>column1, column2,...columnN 為表中欄位名<br>
value1, value2, value3,...valueN 為欄位對應的值<br>
範例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> PUBLISHER <span class="token punctuation">(</span>PUBLISHER_ID<span class="token punctuation">,</span> PUBLISHER_NAME<span class="token punctuation">,</span> CONTACT<span class="token punctuation">,</span> PHONE<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> 
<span class="token punctuation">(</span><span class="token string">'P001'</span><span class="token punctuation">,</span> <span class="token string">'O''Reilly'</span><span class="token punctuation">,</span> <span class="token string">'Ocean'</span> <span class="token punctuation">,</span> <span class="token string">'02-23456789'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">(</span><span class="token string">'P002'</span><span class="token punctuation">,</span> <span class="token string">'John Wiley, Sons Inc'</span><span class="token punctuation">,</span> <span class="token string">'Don'</span> <span class="token punctuation">,</span> <span class="token string">'03-36962869'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P003'</span><span class="token punctuation">,</span> <span class="token string">'Manning Publications'</span><span class="token punctuation">,</span> <span class="token string">'Mary'</span> <span class="token punctuation">,</span> <span class="token string">'04-43456789'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P004'</span><span class="token punctuation">,</span> <span class="token string">'Apress'</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span> <span class="token punctuation">,</span> <span class="token string">'05-59876543'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P005'</span><span class="token punctuation">,</span> <span class="token string">'McGraw-Hill'</span><span class="token punctuation">,</span> <span class="token string">'Mike'</span> <span class="token punctuation">,</span> <span class="token string">'06-69876543'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P006'</span><span class="token punctuation">,</span> <span class="token string">'Pearson'</span><span class="token punctuation">,</span> <span class="token string">'Paul'</span> <span class="token punctuation">,</span> <span class="token string">'09-98767867'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P00X'</span><span class="token punctuation">,</span> <span class="token string">'Publisher X'</span><span class="token punctuation">,</span> <span class="token string">'X-Man'</span> <span class="token punctuation">,</span> <span class="token string">'07-75698765'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'P00Y'</span><span class="token punctuation">,</span> <span class="token string">'Publisher Y'</span><span class="token punctuation">,</span> <span class="token string">'Yale'</span> <span class="token punctuation">,</span> <span class="token string">'08-83698765'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="編號"><a href="#編號" class="header-anchor">#</a> 編號</h2> <ul><li>自動編號</li></ul> <p><code>SMALLSERIAL</code>：1 ~ 32767<br> <code>SERIAL</code>：1 ~ 2,147,483,647<br> <code>BIGSERIAL</code>：1 ~ 922,337,2036,854,775,807</p> <p><strong>語法</strong>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">(</span>
id <span class="token keyword">SERIAL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>範例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> PURCHASE <span class="token punctuation">(</span>
  PURCHASE_ID <span class="token keyword">SERIAL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  ISBN <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  QUANTITY <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  PURCHASE_DATE <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_DATE</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> FK_PURCHASE_BOOK 
  <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>ISBN<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> BOOK <span class="token punctuation">(</span>ISBN<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>查詢當前編號</li></ul> <p><strong>語法</strong>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> currval <span class="token punctuation">(</span>pg_get_serial_sequence<span class="token punctuation">(</span><span class="token string">'table_name'</span><span class="token punctuation">,</span><span class="token string">'column_name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="修改資料"><a href="#修改資料" class="header-anchor">#</a> 修改資料</h2> <ul><li>pgAdmin，指定表格右鍵 &gt; View/Edit Data &gt; All Rows &gt; 修改完成後點擊 Save File 按鈕</li> <li>UPDATE 用來修改資料表，可以同時更新一個或者多個欄位，亦可以在 WHERE 子句中指定任何條件</li></ul> <p><strong>語法</strong>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_name
<span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> columnN <span class="token operator">=</span> valueN
<span class="token keyword">WHERE</span> condition <span class="token punctuation">;</span>
</code></pre></div><p>範例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> PUBLISHER <span class="token keyword">SET</span> CONTACT <span class="token operator">=</span> <span class="token string">'Mary'</span>
<span class="token keyword">WHERE</span> PUBLISHER_ID <span class="token operator">=</span> <span class="token string">'P00X'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="刪除資料"><a href="#刪除資料" class="header-anchor">#</a> 刪除資料</h2> <ul><li><p>pgAdmin，指定表格右鍵 &gt; View/Edit Data &gt; All Rows &gt; 修改完成後點擊 Save File 按鈕</p></li> <li><p>DELETE 用來刪除資料表中的資料</p> <p><strong>注意</strong>：被外來鍵參照到的資料無法刪除</p></li></ul> <p><strong>語法</strong>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--依照條件刪除</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>

<span class="token comment">--全部資料刪除</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name
</code></pre></div><p>範例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--依照條件刪除</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> PUBLISHER 
<span class="token keyword">WHERE</span> PUBLISHER_ID <span class="token operator">=</span> <span class="token string">'P00X'</span> <span class="token operator">OR</span> PUBLISHER_ID <span class="token operator">=</span> <span class="token string">'P00Y'</span><span class="token punctuation">;</span>

<span class="token comment">--全部資料刪除</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> BOOK<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kenny/pgsql/syntax.html" class="prev">
        SQL 語法
      </a></span> <span class="next"><a href="/kenny/pgsql/Transaction.html">
        交易管理 (Transaction Management)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/kenny/assets/js/app.fe21e292.js" defer></script><script src="/kenny/assets/js/2.5ff098fa.js" defer></script><script src="/kenny/assets/js/9.bd98d9c1.js" defer></script>
  </body>
</html>
